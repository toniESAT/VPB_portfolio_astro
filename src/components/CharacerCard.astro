---
import { Image } from "astro:assets";

interface Props {
	img: ImageMetadata;
	width: string;
}

import { LoremIpsum } from "lorem-ipsum";

const lorem = new LoremIpsum({
	sentencesPerParagraph: {
		max: 3,
		min: 2,
	},
	wordsPerSentence: {
		max: 16,
		min: 4,
	}},
	"html"

);
const text = lorem.generateParagraphs(1);

const { img, width } = Astro.props;
const filename = img.src.split("/").pop()?.split("?")[0];
const target = "#" + filename;
---

<a class="card-wrapper" href={target} id={filename}>
	<Image
		class="card-img"
		src={img}
		alt=""
		widths={[240, 540, 720, img.width]}
		sizes={`(max-width: 360px) 240px, (max-width: 720px) 540px, (max-width: 1600px) 720px, ${img.width}px`}
	/>
	<div class="card-text" set:html={text}>
		<h3 class="character-name">{filename}</h3>
		</div>
</a>

<style define:vars={{ cardwidth: width }}>
	.card-wrapper {
		position: relative;
		width: calc(25% - 2rem);
		box-shadow: 0 0 10px 10px black;
		border-radius: 15px;
		transition: scale 500ms ease-in, transform 0s ;
		cursor: pointer;
		transition-property: scale, transform;
		transition-delay: 0ms, 0ms;
	}
	
	.card-wrapper:hover {
		transform:rotateY(360deg);
		scale: 1.1;
		transition: transform 600ms ease-in;
		transition-property: scale, transform;
		transition-delay: 0ms, 300ms;
	}


	.card-wrapper::after {
		content: "";
		position: absolute;
		top: 0;
		bottom: 0;
		right: 0;
		left: 0;
		width: 100%;
		box-shadow: inset 0 0 10px 10px black;
		border-radius: 15px;
		pointer-events: none;
	}

	.card-wrapper::before {
		content: "";
		position: absolute;
		/* background: black; */
		background: radial-gradient(
			ellipse at center,
			rgba(0, 0, 0, 0.3) 0,
			black 100%
		);
		top: 0;
		bottom: 0;
		right: 0;
		left: 0;
		opacity: 0;
		width: 100%;
		border-radius: 15px;
		transition: all 500ms ease;
		pointer-events: none;
	}

	.card-wrapper:hover::before {
		opacity: 1;
	}

	.card-img {
		display: block;
		width: auto;
		height: 100%;
		border-radius: 15px;
		max-height: 100%;
		max-width: 100%;
	}

	.card-text {
		display: flex;
		flex-direction: column;
		justify-content: center;
		font-size: 12pt;
		padding: 0 3rem;
		color: rgba(255,255,255,0);
		position: absolute;
		text-align: justify;
		top: 0;
		bottom: 0;
		right: 0;
		left: 0;
		box-shadow: inset 0 0 10px 10px black;
		border-radius: 15px;
		opacity 0;
		transition: all 400ms ease-in-out;
		transition-delay: 0ms;
	}

	.card-wrapper:hover .card-text {
		opacity: 1;
		color: white;
		transition: all 400ms ease;
		transition-delay: 700ms;

	}

	.character-name{
		text-align:center;
	}

	@media(max-width: 1024px) {
		.card-wrapper {
			width: calc(50% - 2rem);
		}
	}

	@media(max-width: 640px) {
		.card-wrapper {
			width: calc(100% - 2rem);
		}
	}

</style>
