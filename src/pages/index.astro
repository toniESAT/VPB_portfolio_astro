---
import Slideshow from "../components/Slideshow.astro";
import Layout from "../layouts/Layout.astro";

const img_metadata = await Astro.glob(
  "/src/assets/images/slideshow/*.{jpeg,jpg,png}",
);
---

<Layout title="Víctor Pérez Brotons Art Portfolio">
  <Slideshow img_metadata={img_metadata} />
</Layout>

<style>
  html,
  body {
    background: black;
  }
</style>

<script is:inline>
  function expand_content() {
    let slideshow = document.getElementById("slideshow");
    let header_height = document.getElementById("header").offsetHeight;

    if (slideshow) slideshow.style.height = `calc(100vh - ${header_height}px)`;
  }
  
  expand_content();
  document.addEventListener("astro:after-swap", expand_content);
  window.addEventListener("resize", expand_content);

  function remove_underlines() {
    let buttons = Array.from(document.getElementsByClassName("nav-item"));
    buttons.forEach((button) => button.classList.remove("selected"));
  }

  remove_underlines();
  document.getElementById("slideshow").addEventListener("astro:after-swap", remove_underlines);


</script>
